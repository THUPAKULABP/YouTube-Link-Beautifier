<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CineEmbed - Ultimate Video Player Generator</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Outfit', sans-serif;
            background-color: #000000;
            color: #e2e8f0;
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(76, 29, 149, 0.15), transparent 25%), 
                radial-gradient(circle at 85% 30%, rgba(219, 39, 119, 0.15), transparent 25%);
            min-height: 100vh;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a;
        }
        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 3px;
        }

        .glass-panel {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s ease, border-color 0.3s ease;
        }

        .glass-panel:hover {
            border-color: rgba(255, 255, 255, 0.15);
        }

        .input-group {
            transition: all 0.3s ease;
        }
        .input-group:focus-within {
            transform: translateY(-2px);
        }

        /* Animation for the 'copied' state */
        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        .animate-pop {
            animation: pop 0.2s ease-in-out;
        }

        /* Mobile specific adjustments */
        @media (max-width: 768px) {
            .glass-panel {
                padding: 1.25rem !important; /* p-5 */
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // --- Icons ---
        const IconBase = ({ children, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>{children}</svg>
        );
        const Play = (props) => <IconBase {...props}><polygon points="5 3 19 12 5 21 5 3" /></IconBase>;
        const Monitor = (props) => <IconBase {...props}><rect x="2" y="3" width="20" height="14" rx="2" ry="2" /><line x1="8" y1="21" x2="16" y2="21" /><line x1="12" y1="17" x2="12" y2="21" /></IconBase>;
        const Zap = (props) => <IconBase {...props}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" /></IconBase>;
        const Code = (props) => <IconBase {...props}><polyline points="16 18 22 12 16 6" /><polyline points="8 6 2 12 8 18" /></IconBase>;
        const Check = (props) => <IconBase {...props}><polyline points="20 6 9 17 4 12" /></IconBase>;
        const Copy = (props) => <IconBase {...props}><rect x="9" y="9" width="13" height="13" rx="2" ry="2" /><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" /></IconBase>;
        const Smartphone = (props) => <IconBase {...props}><rect x="5" y="2" width="14" height="20" rx="2" ry="2" /><line x1="12" y1="18" x2="12.01" y2="18" /></IconBase>;

        const App = () => {
            // State
            const [url, setUrl] = useState('');
            const [videoId, setVideoId] = useState(null);
            const [theme, setTheme] = useState('ambient'); // ambient, neon, cinema, clean
            const [outputMode, setOutputMode] = useState('embed'); // embed, fullpage
            const [copied, setCopied] = useState(false);
            const [previewKey, setPreviewKey] = useState(0); // Force re-render of preview

            // Parse URL
            useEffect(() => {
                if (!url) { setVideoId(null); return; }
                let id = '';
                try {
                    let clean = url;
                    if (url.includes('<iframe')) {
                        const srcMatch = url.match(/src="([^"]+)"/);
                        if (srcMatch) clean = srcMatch[1];
                    }
                    const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
                    const match = clean.match(regExp);
                    if (match && match[2].length === 11) id = match[2];
                } catch(e) {}
                setVideoId(id || null);
            }, [url]);

            // Force refresh preview when options change
            useEffect(() => {
                setPreviewKey(k => k + 1);
            }, [videoId, theme]);

            const copyToClipboard = () => {
                const code = outputMode === 'fullpage' ? generateFullPage() : generateEmbed();
                
                // Fallback copy mechanism
                const textArea = document.createElement("textarea");
                textArea.value = code;
                textArea.style.position = "fixed"; 
                textArea.style.left = "-9999px";
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    document.execCommand('copy');
                    setCopied(true);
                    setTimeout(() => setCopied(false), 2000);
                } catch (err) {}
                document.body.removeChild(textArea);
            };

            const getThumbnail = (id) => `https://img.youtube.com/vi/${id}/maxresdefault.jpg`;

            // --- GENERATORS ---

            const generateEmbed = () => {
                if (!videoId) return '<!-- Enter a URL to generate code -->';
                
                const thumb = getThumbnail(videoId);
                const uniqueId = 'yt-' + Math.random().toString(36).substr(2, 9);
                const animId = 'anim-' + Math.random().toString(36).substr(2, 9);
                
                let css = '';
                let containerStyle = '';
                let wrapperStyle = '';
                let glowHtml = '';

                // Common Mobile Optimizations
                const commonCss = `
                    .yt-container { width: 100%; position: relative; }
                    .yt-wrapper { position: relative; width: 100%; height: 100%; background: #000; overflow: hidden; }
                    .yt-thumb { position: absolute; inset: 0; background-size: cover; background-position: center; transition: transform 0.4s ease; }
                    .yt-wrapper:hover .yt-thumb { transform: scale(1.05); }
                    .yt-play-btn { 
                        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); 
                        width: 68px; height: 48px; 
                        background: rgba(30,30,30,0.85); backdrop-filter: blur(4px);
                        border-radius: 12px; display: flex; align-items: center; justify-content: center; 
                        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                        z-index: 10;
                    }
                    .yt-wrapper:hover .yt-play-btn { background: #ff0000; transform: translate(-50%, -50%) scale(1.1); box-shadow: 0 8px 20px rgba(255,0,0,0.4); }
                    @media (max-width: 640px) {
                        .yt-play-btn { width: 50px; height: 36px; border-radius: 8px; }
                    }
                `;

                // THEME: AMBIENT (Mobile Friendly + Glow)
                if (theme === 'ambient') {
                    containerStyle = `max-width: 900px; aspect-ratio: 16/9; margin: 0 auto; isolation: isolate;`;
                    glowHtml = `<div class="ambient-glow" style="position: absolute; inset: -10%; background-image: url('${thumb}'); background-size: cover; filter: blur(40px) saturate(1.5) brightness(0.6); opacity: 0.8; z-index: -1; border-radius: 20px; transition: opacity 0.5s;"></div>`;
                    wrapperStyle = `border-radius: 16px; box-shadow: 0 20px 50px rgba(0,0,0,0.5);`;
                }
                // THEME: NEON
                else if (theme === 'neon') {
                    containerStyle = `max-width: 900px; aspect-ratio: 16/9; margin: 0 auto; padding: 3px; border-radius: 16px; background: linear-gradient(45deg, #ff0000, #00ffd5, #002bff, #ff00c8); background-size: 300%; animation: ${animId} 10s linear infinite;`;
                    css = `@keyframes ${animId} { 0% { background-position: 0 0; } 50% { background-position: 300% 0; } 100% { background-position: 0 0; } }`;
                    wrapperStyle = `border-radius: 14px;`;
                }
                // THEME: CINEMA
                else if (theme === 'cinema') {
                    containerStyle = `max-width: 100%; aspect-ratio: 2.35/1; margin: 0 auto; border-top: 1px solid #333; border-bottom: 1px solid #333;`;
                    wrapperStyle = ``;
                    // On mobile, force 16:9 for better viewing area
                    css = `@media (max-width: 640px) { .yt-container { aspect-ratio: 16/9 !important; } }`;
                }
                // THEME: CLEAN
                else {
                    containerStyle = `max-width: 900px; aspect-ratio: 16/9; margin: 0 auto;`;
                    wrapperStyle = `border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);`;
                }

                // JS for functionality (Fast Load Facade)
                const script = `
                <script>
                (function() {
                    var v = document.getElementById('${uniqueId}');
                    if(!v) return;
                    var t = v.querySelector('.yt-thumb');
                    var b = v.querySelector('.yt-play-btn');
                    
                    v.addEventListener('click', function() {
                        var iframe = document.createElement('iframe');
                        iframe.setAttribute('src', 'https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&showinfo=0&modestbranding=1&playsinline=1');
                        iframe.setAttribute('width', '100%');
                        iframe.setAttribute('height', '100%');
                        iframe.setAttribute('frameborder', '0');
                        iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture');
                        iframe.setAttribute('allowfullscreen', '');
                        iframe.style.position = 'absolute';
                        iframe.style.top = '0';
                        iframe.style.left = '0';
                        iframe.style.width = '100%';
                        iframe.style.height = '100%';
                        iframe.style.zIndex = '20';
                        
                        t.style.opacity = '0';
                        b.style.display = 'none';
                        setTimeout(function(){ v.appendChild(iframe); }, 50); // Small delay to allow opacity transition
                    });
                })();
                <\/script>`;

                return `<!-- CineEmbed Player -->
<div class="yt-container" style="${containerStyle}">
    <style>${commonCss} ${css}</style>
    ${glowHtml}
    <div id="${uniqueId}" class="yt-wrapper" style="${wrapperStyle}">
        <!-- High Res Facade Image -->
        <div class="yt-thumb" style="background-image: url('${thumb}');"></div>
        <!-- Play Button -->
        <div class="yt-play-btn" aria-label="Play Video">
            <svg height="100%" version="1.1" viewBox="0 0 68 48" width="100%" style="width: 100%; height: auto; max-width: 40px;"><path d="M 45,24 27,14 27,34" fill="#fff"></path></svg>
        </div>
    </div>
</div>
${script}`;
            };

            const generateFullPage = () => {
                const embedCode = generateEmbed();
                return `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Player</title>
    <style>
        body { margin: 0; padding: 20px; background: #000; min-height: 100vh; display: flex; align-items: center; justify-content: center; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; box-sizing: border-box; }
        @media (max-width: 600px) { body { padding: 0; align-items: flex-start; padding-top: 30%; } }
    </style>
</head>
<body>
    ${embedCode}
</body>
</html>`;
            };

            return (
                <div className="min-h-screen text-slate-200 selection:bg-purple-500/30">
                    
                    {/* Header */}
                    <header className="border-b border-white/5 bg-black/50 backdrop-blur-md sticky top-0 z-50">
                        <div className="max-w-7xl mx-auto px-4 md:px-6 h-16 md:h-20 flex items-center justify-between">
                            <div className="flex items-center gap-3">
                                <div className="w-8 h-8 md:w-10 md:h-10 rounded-xl bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center shadow-lg shadow-purple-900/20">
                                    <Play className="text-white w-4 h-4 md:w-5 md:h-5 fill-current" />
                                </div>
                                <div>
                                    <h1 className="text-lg md:text-xl font-bold tracking-tight text-white">CineEmbed</h1>
                                </div>
                            </div>
                            <div className="flex items-center gap-2 md:gap-6 text-xs md:text-sm font-medium text-slate-400">
                                <div className="hidden md:flex items-center gap-2">
                                    <Zap className="w-4 h-4 text-yellow-400" />
                                    <span>Instant Load</span>
                                </div>
                                <div className="flex items-center gap-2 bg-slate-800/50 px-3 py-1.5 rounded-full border border-slate-700/50">
                                    <Smartphone className="w-3.5 h-3.5 text-emerald-400" />
                                    <span>Mobile Ready</span>
                                </div>
                            </div>
                        </div>
                    </header>

                    <main className="max-w-7xl mx-auto px-4 md:px-6 py-8 md:py-12">
                        <div className="grid grid-cols-1 lg:grid-cols-12 gap-8 md:gap-10">
                            
                            {/* LEFT: Controls (Order 1 on Desktop) */}
                            <div className="lg:col-span-5 space-y-6 md:space-y-8 order-2 lg:order-1">
                                
                                {/* Input Section */}
                                <div className="glass-panel p-5 md:p-6 rounded-2xl space-y-6 relative overflow-hidden group">
                                    <div className="absolute top-0 right-0 p-32 bg-purple-600/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"></div>
                                    
                                    <div>
                                        <label className="text-sm font-semibold text-slate-300 uppercase tracking-wider mb-3 block">Video Source</label>
                                        <div className="input-group relative">
                                            <input 
                                                type="text" 
                                                value={url}
                                                onChange={(e) => setUrl(e.target.value)}
                                                placeholder="Paste YouTube Link..."
                                                className="w-full bg-slate-900/80 border border-slate-700/50 rounded-xl px-4 py-4 pl-12 text-white placeholder-slate-500 focus:outline-none focus:ring-2 focus:ring-purple-500/50 transition-all shadow-inner text-sm md:text-base"
                                            />
                                            <div className="absolute left-4 top-1/2 -translate-y-1/2 text-slate-500">
                                                <Zap className="w-5 h-5" />
                                            </div>
                                        </div>
                                        {videoId && <div className="mt-3 flex items-center text-xs text-emerald-400 font-medium animate-pulse"><Check className="w-3 h-3 mr-1" /> Video Detected</div>}
                                    </div>

                                    {/* Theme Selector */}
                                    <div>
                                        <label className="text-sm font-semibold text-slate-300 uppercase tracking-wider mb-3 block">Player Theme</label>
                                        <div className="grid grid-cols-2 gap-3">
                                            {[
                                                {id: 'ambient', name: 'Ambient', desc: 'Immersive Glow'},
                                                {id: 'cinema', name: 'Cinema', desc: 'Wide Format'},
                                                {id: 'neon', name: 'Neon', desc: 'Gamer Pulse'},
                                                {id: 'clean', name: 'Clean', desc: 'Minimalist'}
                                            ].map(t => (
                                                <button 
                                                    key={t.id}
                                                    onClick={() => setTheme(t.id)}
                                                    className={`p-3 rounded-xl border text-left transition-all duration-200 relative overflow-hidden ${theme === t.id ? 'bg-purple-600/20 border-purple-500/50 text-white shadow-lg shadow-purple-900/20' : 'bg-slate-800/30 border-slate-700/30 text-slate-400 hover:bg-slate-800/50'}`}
                                                >
                                                    <div className="relative z-10">
                                                        <div className="font-semibold text-sm">{t.name}</div>
                                                        <div className="text-xs opacity-60 mt-0.5">{t.desc}</div>
                                                    </div>
                                                    {theme === t.id && <div className="absolute inset-0 bg-gradient-to-r from-purple-600/10 to-transparent pointer-events-none"></div>}
                                                </button>
                                            ))}
                                        </div>
                                    </div>

                                    {/* Output Mode */}
                                    <div>
                                        <label className="text-sm font-semibold text-slate-300 uppercase tracking-wider mb-3 block">Export Format</label>
                                        <div className="flex bg-slate-900/50 p-1 rounded-xl border border-slate-800">
                                            <button 
                                                onClick={() => setOutputMode('embed')}
                                                className={`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${outputMode === 'embed' ? 'bg-slate-700 text-white shadow-sm' : 'text-slate-400 hover:text-white'}`}
                                            >
                                                Embed Code
                                            </button>
                                            <button 
                                                onClick={() => setOutputMode('fullpage')}
                                                className={`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${outputMode === 'fullpage' ? 'bg-slate-700 text-white shadow-sm' : 'text-slate-400 hover:text-white'}`}
                                            >
                                                Full HTML Page
                                            </button>
                                        </div>
                                    </div>
                                </div>

                                {/* Code Output */}
                                <div className="glass-panel rounded-2xl overflow-hidden flex flex-col">
                                    <div className="bg-black/40 px-5 md:px-6 py-4 flex items-center justify-between border-b border-white/5">
                                        <div className="flex items-center gap-2 text-slate-300">
                                            <Code className="w-4 h-4" />
                                            <span className="text-xs font-mono uppercase tracking-wider">Generated Source</span>
                                        </div>
                                        <button 
                                            onClick={copyToClipboard}
                                            disabled={!videoId}
                                            className={`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-bold uppercase tracking-wide transition-all ${copied ? 'bg-emerald-500 text-white animate-pop' : 'bg-white text-black hover:bg-slate-200'}`}
                                        >
                                            {copied ? <Check className="w-4 h-4" /> : <Copy className="w-4 h-4" />}
                                            {copied ? 'Copied' : 'Copy'}
                                        </button>
                                    </div>
                                    <div className="relative group">
                                        <pre className="text-xs font-mono text-slate-400 p-5 md:p-6 overflow-x-auto bg-slate-950/50 max-h-48 custom-scrollbar whitespace-pre-wrap break-all">
                                            {generateEmbed()}
                                        </pre>
                                        {!videoId && <div className="absolute inset-0 flex items-center justify-center bg-slate-950/80 backdrop-blur-sm text-slate-500 text-sm">Waiting for video...</div>}
                                    </div>
                                </div>
                            </div>

                            {/* RIGHT: Live Preview (Order 1 on Mobile, 2 on Desktop) */}
                            <div className="lg:col-span-7 order-1 lg:order-2">
                                <div className="sticky top-20 md:top-28 space-y-4">
                                    <div className="flex items-center justify-between px-2">
                                        <div className="flex items-center gap-2 text-white">
                                            <Monitor className="w-5 h-5 text-purple-400" />
                                            <h2 className="text-lg font-bold">Live Preview</h2>
                                        </div>
                                        <div className="flex items-center gap-2 text-xs text-slate-400">
                                            <div className="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                                            Interactive
                                        </div>
                                    </div>

                                    {/* Preview Container */}
                                    <div className="glass-panel p-4 md:p-8 rounded-3xl min-h-[300px] md:min-h-[500px] flex items-center justify-center relative overflow-hidden bg-slate-900/40">
                                        {/* Background Grid */}
                                        <div className="absolute inset-0" style={{backgroundImage: 'linear-gradient(rgba(255,255,255,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.03) 1px, transparent 1px)', backgroundSize: '40px 40px'}}></div>
                                        
                                        {videoId ? (
                                            <div className="relative z-10 w-full animate-fade-in" key={previewKey}>
                                                <div dangerouslySetInnerHTML={{ __html: generateEmbed() }} />
                                            </div>
                                        ) : (
                                            <div className="text-center relative z-10">
                                                <div className="w-16 h-16 md:w-24 md:h-24 bg-slate-800/50 rounded-2xl flex items-center justify-center mx-auto mb-6 border border-slate-700 rotate-3 transition-transform hover:rotate-6">
                                                    <Play className="w-8 h-8 md:w-10 md:h-10 text-slate-500" />
                                                </div>
                                                <h3 className="text-lg md:text-xl font-medium text-white mb-2">Waiting for Video</h3>
                                                <p className="text-slate-400 max-w-xs mx-auto text-sm">Paste a YouTube link to see the high-performance cinematic player here.</p>
                                            </div>
                                        )}
                                    </div>

                                    <div className="grid grid-cols-2 gap-4 text-xs text-slate-500 px-4">
                                        <div className="flex items-center gap-2"><div className="w-1.5 h-1.5 bg-purple-500 rounded-full"></div> <strong>Theme Applied:</strong> The generated code will match your selected style perfectly.</div>
                                        <div className="flex items-center gap-2"><div className="w-1.5 h-1.5 bg-emerald-500 rounded-full"></div> <strong>Mobile Optimized:</strong> Layouts adapt automatically to phone screens.</div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
